<div class="settings-page-container">
  <h1>Opperating Settings</h1>
  <form class="settings-form" [formGroup]="settingsForm" (ngSubmit)="saveSettings($event)">
    <div class="row-container">
      <mat-form-field style="width:250px;">
        <mat-label>Gap Between</mat-label>
        <input matInput type="number" (keypress)="numericOnly($event)" formControlName="gapBetweenAppointments">
        <mat-hint>Number of hours between appointments</mat-hint>
        <mat-error *ngIf="settingsForm.get('gapBetweenAppointments')?.hasError('required')">Gap Between is
          required.</mat-error>
        <mat-error *ngIf="settingsForm.get('gapBetweenAppointments')?.hasError('min')">Gap Between should be a positive
          number.</mat-error>
      </mat-form-field>
      <mat-form-field style="width:250px;">
        <mat-label>Months Ahead</mat-label>
        <input matInput type="number" (keypress)="numericOnly($event)" formControlName="bookMonthsAheadLimit">
        <mat-hint>Number of months in advance the customer can book</mat-hint>
        <mat-error *ngIf="settingsForm.get('bookMonthsAheadLimit')?.hasError('required')">Months Ahead is
          required.</mat-error>
        <mat-error *ngIf="settingsForm.get('bookMonthsAheadLimit')?.hasError('min')">Months Ahead should be a positive
          number.</mat-error>
      </mat-form-field>
    </div>

    <div formArrayName="days">
      <div *ngFor="let dayControl of daysFormArray.controls; let i = index" [formGroupName]="i"
        class="row-container-nowrap" style="padding-bottom: 30px;">
        <mat-checkbox style="padding-top:5px;" formControlName="checked">{{daysOfWeek[i]}}</mat-checkbox>
        <mat-form-field style="width:130px; padding-top:5px;">
          <mat-label>From</mat-label>
          <input matInput type="time" formControlName="from" (input)="forceHourFormat($event)">
          <mat-hint>
            <span *ngIf="getDayFormGroup(i)?.hasError('invalidTime')" style="color:red; display: contents;">*
              required.</span>
            <span *ngIf="isInvalidTimeOrder(i)"
              style="color:red; line-height: 1px; white-space: nowrap; justify-content: center; display: contents;">End
              time cannot
              be before start time.</span>
          </mat-hint>
        </mat-form-field>
        <mat-form-field style="width:130px; padding-top:5px;">
          <mat-label>To</mat-label>
          <input matInput type="time" formControlName="to" (input)="forceHourFormat($event)">
          <mat-error *ngIf="getDayFormGroup(i).hasError('invalidTime') && getDayFormGroup(i).get('checked')?.value">End
            time required.
          </mat-error>
          <mat-error *ngIf="isInvalidTimeOrder(i)">
            End time cannot be before start time.
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <button mat-raised-button color="primary" type="submit">Save</button>
  </form>
</div>